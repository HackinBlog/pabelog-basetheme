{"version":3,"sources":["day8/re_frame_10x/db.cljs"],"sourcesContent":["(ns day8.re-frame-10x.db\n  (:require [day8.re-frame-10x.inlined-deps.re-frame.v0v10v6.re-frame.core :as rf]\n            [day8.re-frame-10x.utils.localstorage :as localstorage]))\n\n(defn init-db [debug?]\n  (let [panel-width% (localstorage/get \"panel-width-ratio\" 0.35)\n        show-panel? (localstorage/get \"show-panel\" true)\n        selected-tab (localstorage/get \"selected-tab\" :event)\n        filter-items (localstorage/get \"filter-items\" [])\n        app-db-paths (into (sorted-map) (localstorage/get \"app-db-paths\" {}))\n        json-ml-paths (localstorage/get \"app-db-json-ml-expansions\" #{})\n        external-window? (localstorage/get \"external-window?\" false)\n        external-window-dimensions (localstorage/get \"external-window-dimensions\" {:width 800 :height 800 :top 0 :left 0})\n        show-epoch-traces? (localstorage/get \"show-epoch-traces?\" true)\n        using-trace? (localstorage/get \"using-trace?\" true)\n        ignored-events (localstorage/get \"ignored-events\" {})\n        low-level-trace (localstorage/get \"low-level-trace\" {:reagent true :re-frame true})\n        filtered-view-trace (localstorage/get \"filtered-view-trace\" (let [id1 (random-uuid)\n                                                                          id2 (random-uuid)]\n                                                                      {id1 {:id id1 :ns-str \"re-com.box\" :ns 're-com.box :sort 0}\n                                                                       id2 {:id id2 :ns-str \"re-com.input-text\" :ns 're-com.input-text :sort 1}}))\n        num-epochs (localstorage/get \"retained-epochs\" 25)\n        follows-events? (localstorage/get \"app-db-follows-events?\" true)\n        categories (localstorage/get \"categories\" #{:event :sub/run :sub/create :sub/dispose})]\n    (when using-trace?\n      (rf/dispatch [:global/enable-tracing]))\n    (rf/dispatch [:settings/panel-width% panel-width%])\n    (rf/dispatch [:settings/show-panel? show-panel?])\n    (rf/dispatch [:settings/selected-tab selected-tab])\n    (rf/dispatch [:settings/set-ignored-events ignored-events])\n    (rf/dispatch [:settings/set-filtered-view-trace filtered-view-trace])\n    (rf/dispatch [:settings/set-low-level-trace low-level-trace])\n    (rf/dispatch [:settings/set-number-of-retained-epochs num-epochs])\n    (rf/dispatch [:settings/app-db-follows-events? follows-events?])\n    (rf/dispatch [:settings/debug? debug?])\n    ;; Important that window dimensions are set before we open an external window.\n    (rf/dispatch [:settings/external-window-dimensions external-window-dimensions])\n    (when external-window?\n      (rf/dispatch [:global/launch-external]))\n    (rf/dispatch [:traces/filter-items filter-items])\n    (rf/dispatch [:traces/set-categories categories])\n    (rf/dispatch [:trace-panel/update-show-epoch-traces? show-epoch-traces?])\n    (rf/dispatch [:app-db/paths app-db-paths])\n    (rf/dispatch [:app-db/set-json-ml-paths json-ml-paths])\n    (rf/dispatch [:global/add-unload-hook])\n    (rf/dispatch [:app-db/reagent-id])))\n"],"mappings":"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","names":["day8.re-frame-10x.db/init-db","day8.re_frame_10x.utils.localstorage.get.cljs$core$IFn$_invoke$arity$2","cljs.core.into.cljs$core$IFn$_invoke$arity$2","cljs.core/sorted-map","cljs.core/random-uuid","id1","id2","using-trace?","G__24339","day8.re-frame-10x.inlined-deps.re-frame.v0v10v6.re-frame.core/dispatch","G__24340","panel-width%","G__24341","show-panel?","G__24342","selected-tab","G__24343","ignored-events","G__24344","filtered-view-trace","G__24349","low-level-trace","G__24350","num-epochs","G__24351","follows-events?","G__24352","debug?","G__24353","external-window-dimensions","external-window?","G__24354","G__24355","filter-items","G__24356","categories","G__24357","show-epoch-traces?","G__24359","app-db-paths","G__24360","json-ml-paths","G__24361","G__24362"]}